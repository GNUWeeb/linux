#
# Feature name:          membarrier-sync-core
#         Kconfig:       ARCH_HAS_MEMBARRIER_SYNC_CORE
#         description:   arch supports core serializing membarrier
#
# Architecture requirements
#
#
# An architecture that wants to support
# MEMBARRIER_CMD_PRIVATE_EXPEDITED_SYNC_CORE needs to define precisely what it
# is supposed to do and implement membarrier_sync_core_before_usermode() to
# make it do that.  Then it can select ARCH_HAS_MEMBARRIER_SYNC_CORE via
# Kconfig and document what SYNC_CORE does on that architecture in this
# list.
#
# On x86, a program can safely modify code, issue
# MEMBARRIER_CMD_PRIVATE_EXPEDITED_SYNC_CORE, and then execute that code, via
# the modified address or an alias, from any thread in the calling process.
#
# On arm and arm64, a program can modify code, flush the icache as needed,
# and issue MEMBARRIER_CMD_PRIVATE_EXPEDITED_SYNC_CORE to force a "context
# synchronizing event", aka pipeline flush on all CPUs that might run the
# calling process.  Then the program can execute the modified code as long
# as it is executed from an address consistent with the icache flush and
# the CPU's cache type.  On arm, cacheflush(2) can be used for the icache
# flushing operation.
#
# On powerpc, a program can use MEMBARRIER_CMD_PRIVATE_EXPEDITED_SYNC_CORE
# similarly to arm64.  It would be nice if the powerpc maintainers could
# add a more clear explanantion.
